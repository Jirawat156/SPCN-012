# SPCN-012
# Hypervisor Technology
Hypervisor (ไฮเปอร์ไวเซอร์) คือ อะไร มีประโยชน์และจุดประสงค์อะไร มีกี่ประเภท ระบบสมองกลแบบฝังตัวของ Hypervisor มีการทำงานอย่างไร ? มาหาคำตอบกัน
hypervisor คือเทคนิคการจำลองให้ระบบปฏิบัติการหลายระบบสามารถทำงานพร้อมกันบนโฮสต์ได้ โดยหน้าที่ของ hyper v คือการตั้งค่าระบบปฏิบัติการแต่ละระบบไม่ให้เกิดการทำงานที่ทับซ้อนกัน Hypervisor ได้ถูกเรียกอีกอย่างว่า Virtual Machine Management (VMM) ขึ้นอยู่กับภารกิจที่ได้รับเพื่อจัดการเครื่องเสมือนหลายเครื่อง

> โดยคลัสเตอร์การคำนวณ, การคำนวณแบบกริด, พีซีหรือเมนเฟรมซึ่งอยู่ในคอมพิวเตอร์ทุกประเภทจะมีระบบที่ต่างกัน เพราะในแต่ละระบบปฏิบัติการถูกออกแบบตามความต้องการของระบบนั้นๆ สำหรับ Hypervisor ถูกออกแบบให้เหมาะกับเมนเฟรมมากกว่า Windows OS เนื่องจาก Hypervisor ต้องจัดการหลายระบบพร้อมกันได้เหมือนกับโฮสต์

อ้างอิง https://personet.co.th/hypervisor/

# Container Technology
Containerization เป็นกระบวนการปรับใช้ซอฟต์แวร์ที่รวมรหัสของแอปพลิเคชันเข้ากับไฟล์และไลบรารีทั้งหมดที่จำเป็นสำหรับการทำงานบนโครงสร้างพื้นฐานใดๆ ปกติแล้วการเรียกใช้แอปพลิเคชันใดๆ บนคอมพิวเตอร์ของคุณ คุณต้องติดตั้งเวอร์ชันที่ตรงกับระบบปฏิบัติการของเครื่องของคุณ ตัวอย่างเช่น คุณจำเป็นต้องติดตั้งแพ็กเกจซอฟต์แวร์เวอร์ชันของ Windows บนคอมพิวเตอร์ Windows แต่ด้วย Containerization คุณสามารถสร้างแพ็กเกจซอฟต์แวร์เดียว หรือคอนเทนเนอร์ ที่ทำงานในทุกประเภทของอุปกรณ์และระบบปฏิบัติการ 

> ประโยชน์ของการคอนเทนเนอร์คืออะไร
นักพัฒนาใช้คอนเทนเนอร์เพื่อสร้างและใช้แอปพลิเคชันทันสมัยเพราะข้อดีดังต่อไปนี้ 

อ้างอิง https://aws.amazon.com/th/what-is/containerization/

# Monolithic MicroService 
Microservices vs Monolithic
ก่อนอื่นเรามาทำความรู้จัก Microservices กันก่อน Microservice [1] คือสถาปัตยกรรมหรือเทคนิคการพัฒนาซอฟต์แวร์ โดยวางโครงสร้างของแอปพลิเคชันให้เป็นชุดในลักษณะ loosely coupled หรือมีความ Independence นั่นเอง
Microservices มีประโยชน์อย่างไร ก่อนอื่นต้องไปดู Monolithic Architecture

>Monolithic Architecture คือสถาปัตยกรรมที่นิยมกันโดยทั่วไป Component ต่างๆถูกเขียนขึ้นมาด้วย Environment เดียวกันใช้ Database เดียวกันเราจะพบเห็นใน Web Application ทั่วไปดัง Fig 1. การพัฒนาก็อาจจะแบ่งส่วนกันทำงาน Front End , Backend และทีม Database ทีนี้เรามาดู ประโยชน์ของ Monolithic กันครับ

อ้างอิง https://www.softnix.co.th/2018/07/13/%E0%B8%82%E0%B9%89%E0%B8%AD%E0%B9%81%E0%B8%95%E0%B8%81%E0%B8%95%E0%B9%88%E0%B8%B2%E0%B8%87%E0%B8%A3%E0%B8%B0%E0%B8%AB%E0%B8%A7%E0%B9%88%E0%B8%B2%E0%B8%87-microservices-%E0%B9%81%E0%B8%A5%E0%B8%B0-mono/

# Proxmox
Proxmox เป็นแพลตฟอร์มการจัดการเซิร์ฟเวอร์โอเพ่นซอร์ซที่สมบูรณ์แบบสำหรับการจำลองเสมือนขององค์กร ได้รับการพัฒนาโดย Proxmox Server Solutions ในออสเตรียภายใต้ Internet Foundation of Austria และเผยแพร่ภายใต้ GNU General Public License
 
ซึ่งมันเป็นการกระจาย Linux ที่ใช้ Debian พร้อมเคอร์เนล Ubuntu LTS ที่ได้รับการแก้ไข ที่ช่วยให้สามารถปรับใช้และจัดการ VM และคอนเทนเนอร์ได้ เช่น KVM (VM แบบเคอร์เนล) สำหรับ VM และ Linux Containers (LXC) สำหรับคอนเทนเนอร์ ซึ่งเป็นเครื่องมือการจำลองเสมือนระดับ OS ที่รวมอยู่ใน Proxmox VE ตั้งแต่เวอร์ชัน 4.0
 
ซอฟต์แวร์นี้ยังรวมถึงตัวติดตั้งเปล่า อินเทอร์เฟซการจัดการบนเว็บ และเครื่องมือบรรทัดคำสั่งมากมาย และนอกจากนี้ยังมี REST API เพื่อรองรับเครื่องมือของบุคคลที่สาม
 
ผู้ดูแลระบบสามารถดำเนินการจัดการทั้งหมดด้วยอินเทอร์เฟซผู้ใช้แบบกราฟิก (GUI) แบบบูรณาการ โดยอินเทอร์เฟซนี้ใช้เฟรมเวิร์ก JavaScript ของ ExtJS และทำงานร่วมกับเบราว์เซอร์รุ่นใหม่ๆ
 
Proxmox สามารถจัดคลัสเตอร์ข้ามโหนดเซิร์ฟเวอร์หลายเครื่องเพื่อความพร้อมใช้งานสูง เมื่อปรับใช้แล้ว ตัวจัดการทรัพยากรที่เรียกว่า Proxmox VE HA Manager จะตรวจสอบ VM และคอนเทนเนอร์ทั้งหมดบนคลัสเตอร์ทั้งหมด จากนั้นจะดำเนินการโดยอัตโนมัติหากหนึ่งในนั้นล้มเหลว
 
> นอกจากนี้ยังมีคุณสมบัติการโยกย้ายแบบออนไลน์ ซึ่งช่วยให้ย้าย VM จากโหนดคลัสเตอร์ Proxmox VE ไปยังโหนดอื่นได้โดยไม่ต้องหยุดทำงาน ทำให้ผู้ดูแลระบบสามารถเริ่มต้นกระบวนการด้วยสคริปต์หรือเว็บอินเทอร์เฟซได้
Proxmox Virtual Environment รองรับ RAM สูงสุด 12TB และ CPU ตรรกะ 768 ตัวต่อโฮสต์ อีกทั้งยังรองรับ Intel EMT64 หรือ AMD64 พร้อมแฟล็กซีพียู Intel VT/AMD-V
นอกจากนี้ยังมีไฟร์วอลล์ในตัวที่ปรับแต่งได้เพื่อให้กำหนดค่าผ่าน GUI หรือ CLI โดยสามารถตั้งค่ากฎไฟร์วอลล์สำหรับโฮสต์ทั้งหมดภายในคลัสเตอร์หรือกำหนดกฎสำหรับ VM และคอนเทนเนอร์เท่านั้น

อ้างอิง https://www.quickserv.co.th/knowledge-base/technology/VMware-vSphere-%e0%b8%81%e0%b8%b1%e0%b8%9a-Proxmox-%e0%b8%aa%e0%b8%b3%e0%b8%ab%e0%b8%a3%e0%b8%b1%e0%b8%9a%e0%b8%98%e0%b8%b8%e0%b8%a3%e0%b8%81%e0%b8%b4%e0%b8%88-%e0%b9%83%e0%b8%8a%e0%b9%89%e0%b9%81%e0%b8%9a%e0%b8%9a%e0%b9%84%e0%b8%ab%e0%b8%99%e0%b8%94%e0%b8%b5%e0%b8%97%e0%b8%b5%e0%b9%88%e0%b8%aa%e0%b8%b8%e0%b8%94/

# Ceph
Ceph Storage เป็นระบบ distributed storage แบบหนึ่ง หรือพูดง่ายๆ คือ เป็น storage ที่ทำงานบน cluster ของ computer node โดยในระบบ Ceph Storage ประกอบไปด้วย node 3 ประเภท คือ

Monitor ทำหน้าที่ดูแลสถานะของ cluster
OSD (Object Storage Device) ทำหน้าที่อ่าน/เขียนข้อมูลตามคำสั่งของผู้ใช้
MDS (Metadata Server) ทำหน้าที่ดูแลสถานะของ file hierarchy (มี node ประเภทนี้เฉพาะใช้งาน Ceph Storage กับ CephFS เท่านั้น ดังที่จะอธิบายในหัวข้อหลังจากนี้ครับ)

> เพราะว่า Ceph Storage ทำงานบน cluster ที่แต่ละ node ทำหน้าที่แตกต่างกันอย่างชัดเจน ทำให้การบริหารจัดการทำได้สะดวก workload ถูกกระจายออกไปอย่างเหมาะสม ลดความเสี่ยงจาก system failure และทำให้ scale ได้ง่ายอีกด้วย

อ้างอิง https://www.throughwave.co.th/2017/04/10/%E0%B9%81%E0%B8%99%E0%B8%B0%E0%B8%99%E0%B8%B3-ceph-storage-distributed-storage-%E0%B8%A3%E0%B8%B9%E0%B8%9B%E0%B9%81%E0%B8%9A%E0%B8%9A%E0%B9%83%E0%B8%AB%E0%B8%A1%E0%B9%88%E0%B8%97%E0%B8%B5%E0%B9%88/

# NFS
Network File System หรือเรียกย่อ ๆ ว่า NFS เป็น Protocol ที่ช่วยให้ Computer สามารถแชร์ข้อมูลผ่าน Network ได้ มีการพัฒนาและนำมาใช้งานใน ปี ค.ศ.1984 และยังเป็น Solution ที่ยังคงใช้งานกันแพร่หลายจวบจนปัจจุบันครับ
NFS ใช้รูปแบบโครงสร้างที่เป็น Server และ Client ในการทำให้คอมพิวเตอร์หลาย ๆ เครื่องใน Local Network เดียวกันสามารถเข้าถึงไฟล์ได้
โดยในฝั่งของ Server ผู้ที่มีหน้าที่ดูแลระบบจะทำการตั้งค่า Folder ว่า Folder ไหนจะทำการแชร์ผ่าน Network ฝั่งของ Client ก็จะต้อง Mount ไฟล์ผ่าน Network โดยใช้คำสั่ง Mount
ด้วยการทำแบบนี้ ทำให้มุมมองในการใช้งานของฝั่ง Client ที่ Mount ผ่านทาง Network ด้วย NFS จะให้ความรู้สึกเหมือนกับว่าเราใช้งานไฟล์จากในเครื่องคอมพิวเตอร์ของเราเอง เราเคยใช้งาน Local File แบบไหน เราก็สามารถใช้งานแบบเดียวกันได้กับการ Mount จาก NFS
ทีนี้หลังจากที่มีการแชร์ผ่านทาง Network ไปแล้ว NFS daemons ที่อยู่ทั้งฝั่ง Server และ Client จะทำการ Sync ข้อมูลระหว่าง Device อยู่ตลอดเวลา หรือพูดอีกอย่างก็คือ ถ้ามีคนแก้ไขไฟล์ที่ Mount จาก NFS ในเครื่องนึง ทุก ๆ เครื่องที่ Mount อยู่ก็จะเห็นว่าไฟล์นั้นมีการเปลี่ยนแปลงไปครับ
ในทางเทคนิค เราจะใช้ NFS ในการแชร์ข้อมูลกันเฉพาะใน Local Network การที่จะแชร์ไฟล์ผ่าน Internet เป็นเรื่องที่ยากมากเพราะว่า NFS ไม่ได้ถูกออกแบบมาเพื่อรองรับ Routing ที่มีความซับซ้อน หรือการทำ NATความจริงก็คือ NFS ไม่ได้มีการทำ Encryption โดย Default ทำให้ไม่ใช่ Solution ที่จะนำไปใช้งานแบบแชร์ไฟล์ผ่านทาง Internet นั่นเอง

> ในอดีต NFS เป็นที่นิยมใช้งานกันบน Unix และ Linux สาเหตุส่วนนึงก็น่าจะมากการที่ NFS พัฒนาโดย Sun Microsystems บริษัทที่เป็น Vendor ของ Unix รายใหญ่ จวบจนปัจจุบัน NFS Protocol ก็ได้กลายมาเป็น Standard Protocol ที่ง่ายต่อการใช้งานกับ Open Source และในปัจจุบันเอง NFS ก็สามารถที่จะใช้งานกับ Windows ได้ด้วยเช่นกัน

อ้างอิง https://blog.cloudhm.co.th/nfs-vs-smb/
